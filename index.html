<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0d6efd">
  <title>Expense Tracker</title>
</head>

<body>
  <nav class="navbar bg-primary mb-4">
    <div class="container">
      <a href="index.html" class="navbar-brand text-white">Expense Tracker</a>
      <ul class="navbar-nav ms-auto flex-row">
        <li class="nav-item">
          <a href="index.html" class="nav-link text-white active me-3">Dashboard</a>
        </li>
        <li class="nav-item">
          <a href="history.html" class="nav-link text-white">History</a>
        </li>
        <li class="nav-item">
          <button id="darkToggle" class="btn btn-link nav-link text-white ms-2" title="Toggle dark mode" data-bs-toggle="tooltip" data-bs-placement="bottom">
            <i id="darkIcon" class="bi bi-moon-fill" style="font-size:1.1rem;color:#fff"></i>
          </button>
        </li>
        <li class="nav-item">
          <button id="openSettings" class="btn btn-link nav-link text-white ms-2" data-bs-toggle="modal"
            data-bs-target="#settingsModal" title="Settings" data-bs-toggle="tooltip" data-bs-placement="bottom">
            <i class="bi bi-gear-fill" style="font-size:1.1rem;color:#fff"></i>
          </button>
        </li>
      </ul>
    </div>
  </nav>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">
        <div class="card mb-4">
          <div class="card-body">
            <h4 class="card-title text-muted">Your Balance</h4>
            <h1 id="balance" class="display-4">$0.00</h1>
          </div>
        </div>
        <!-- Success message visible on dashboard when transaction added -->
        <div id="success-message" class="alert alert-success mt-2" style="display:none;">
          Transaction added successfully!
        </div>

        <div class="row mb-4">
          <div class="col-6">
            <div class="card h-100">
              <div class="card-body text-center">
                <h4 class="card-title text-muted">Income</h4>
                <p id="money-plus" class="money plus mb-0">+$0.00</p>
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="card h-100">
              <div class="card-body text-center">
                <h4 class="card-title text-muted">Expense</h4>
                <p id="money-minus" class="money minus mb-0">-$0.00</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Percentage boxes below Income/Expense -->
        <div class="row mb-4">
          <div class="col-4">
            <div class="card h-100 perc-box text-center">
              <div class="card-body">
                <h6 class="text-muted">(10% of Income)</h6>
                <p id="box1" class="mb-0 display-6">$0.00</p>
              </div>
            </div>
          </div>
          <div class="col-4">
            <div class="card h-100 perc-box text-center">
              <div class="card-body">
                <h6 class="text-muted">(50% of Income)</h6>
                <p id="box2" class="mb-0 display-6">$0.00</p>
              </div>
            </div>
          </div>
          <div class="col-4">
            <div class="card h-100 perc-box text-center">
              <div class="card-body">
                <h6 class="text-muted">(40% of Income)</h6>
                <p id="box3" class="mb-0 display-6">$0.00</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Floating Add Button (opens Add Transaction modal) -->
        <button id="fabAdd" class="btn btn-primary fab" data-bs-toggle="modal" data-bs-target="#addModal"
          aria-label="Add transaction">
          <i class="bi bi-plus-lg" style="font-size: 1.25rem;"></i>
        </button>

        <!-- Add Transaction Modal -->
        <div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="addModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="addModalLabel">Add Transaction</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form id="form">
                  <div class="mb-3">
                    <label for="text" class="form-label">Description</label>
                    <input type="text" class="form-control" id="text" maxlength="80"
                      placeholder="Enter description..." />
                    <div class="form-text text-muted">
                      <small id="desc-counter">0 / 80</small>
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="amount" class="form-label">Amount<br>
                      <small class="text-muted">(negative - expense, positive - income)</small>
                    </label>
                    <input type="number" class="form-control" id="amount" placeholder="Enter amount..." />
                  </div>
                  <div class="mb-3">
                    <label for="date" class="form-label">Date
                      <small class="text-muted">(today or earlier only)</small>
                    </label>
                    <input type="date" class="form-control" id="date" max="" />
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="submitAdd">Add transaction</button>
              </div>
            </div>
          </div>
        </div>
        <!-- Settings Modal -->
        <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel"
          aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="settingsModalLabel">Dashboard Settings</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form id="settingsForm">
                  <div class="mb-3">
                    <label for="presetSelect" class="form-label">Presets</label>
                    <select id="presetSelect" class="form-select" aria-label="Preset percentages">
                      <option value="default">Default (10 / 50 / 40)</option>
                      <option value="savings">Savings heavy (20 / 50 / 30)</option>
                      <option value="bills">Bills-first (10 / 60 / 30)</option>
                      <option value="custom">Custom</option>
                    </select>
                    <div class="form-text">Choose a preset to quickly set percentages or select Custom to enter values manually.</div>
                  </div>
                  <p class="small text-muted">Set the percentage split of total income for each box. Values must sum to
                    100%.</p>
                  <div class="mb-3">
                    <label for="pct1" class="form-label">Box 1 (%)</label>
                    <input type="number" min="0" max="100" step="1" class="form-control" id="pct1" value="10" required>
                  </div>
                  <div class="mb-3">
                    <label for="pct2" class="form-label">Box 2 (%)</label>
                    <input type="number" min="0" max="100" step="1" class="form-control" id="pct2" value="50" required>
                  </div>
                  <div class="mb-3">
                    <label for="pct3" class="form-label">Box 3 (%)</label>
                    <input type="number" min="0" max="100" step="1" class="form-control" id="pct3" value="40" required>
                  </div>
                  <div id="pct-error" class="text-danger" style="display:none;">Percentages must add up to 100%.</div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveSettings">Save</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS and Popper.js -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>
</body>

</html>